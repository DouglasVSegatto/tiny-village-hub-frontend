name: Frontend App Deployment

on:
  push:
    branches:
      - main

jobs:
  deploy:
    # Keep your specific runner label
    runs-on: frontend-runner

    steps:
      - name: 1. Checkout Frontend Code
        uses: actions/checkout@v4
        with:
          # This ensures the code lands exactly in the folder Dockge is watching
          path: tiny-village-hub-frontend

      - name: 2. Deploy Frontend Service Only
        run: |
          # Navigate to the NEW persistent stack folder
          cd /opt/stacks/web-project

          # Rebuild and restart only the frontend-app service
          docker compose up -d --build frontend-app
